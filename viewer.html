<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PDF Viewer - Read and study PDFs with advanced features">
    <title>PDF Viewer - PDF Tools</title>

    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%234F46E5' rx='20' width='100' height='100'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-size='50' fill='white' font-weight='bold'>P</text></svg>">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/viewer.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>

<body class="viewer-body">
    <!-- Viewer Header -->
    <header class="viewer-header">
        <div class="viewer-header-left">
            <a href="index.html" class="logo-mini">
                <span class="logo-icon" style="width: 28px; height: 28px; font-size: 12px;">P</span>
            </a>
            <button class="viewer-btn" id="sidebarToggle" title="Toggle Sidebar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                    <line x1="9" y1="3" x2="9" y2="21" />
                </svg>
            </button>
            <span class="viewer-filename" id="fileName">No file loaded</span>
        </div>

        <div class="viewer-header-center">
            <button class="viewer-btn" id="prevPage" title="Previous Page">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6" />
                </svg>
            </button>
            <div class="page-input-group">
                <input type="number" id="pageInput" value="1" min="1">
                <span>/</span>
                <span id="totalPages">0</span>
            </div>
            <button class="viewer-btn" id="nextPage" title="Next Page">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6" />
                </svg>
            </button>

            <div class="viewer-divider"></div>

            <button class="viewer-btn" id="zoomOut" title="Zoom Out">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="8" y1="11" x2="14" y2="11" />
                </svg>
            </button>
            <select class="zoom-select" id="zoomSelect">
                <option value="0.5">50%</option>
                <option value="0.75">75%</option>
                <option value="1" selected>100%</option>
                <option value="1.25">125%</option>
                <option value="1.5">150%</option>
                <option value="2">200%</option>
                <option value="fit-width">Fit Width</option>
                <option value="fit-page">Fit Page</option>
            </select>
            <button class="viewer-btn" id="zoomIn" title="Zoom In">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="11" y1="8" x2="11" y2="14" />
                    <line x1="8" y1="11" x2="14" y2="11" />
                </svg>
            </button>
        </div>

        <div class="viewer-header-right">
            <button class="viewer-btn" id="searchToggle" title="Search (Ctrl+F)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
            </button>
            <button class="viewer-btn" id="bookmarkBtn" title="Add Bookmark">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" />
                </svg>
            </button>

            <div class="viewer-divider"></div>

            <!-- View Mode Dropdown -->
            <div class="dropdown">
                <button class="viewer-btn" id="viewModeBtn" title="View Mode">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" />
                        <rect x="14" y="3" width="7" height="7" />
                        <rect x="3" y="14" width="7" height="7" />
                        <rect x="14" y="14" width="7" height="7" />
                    </svg>
                </button>
                <div class="dropdown-menu" id="viewModeMenu">
                    <button class="dropdown-item active" data-mode="single">Single Page</button>
                    <button class="dropdown-item" data-mode="continuous">Continuous Scroll</button>
                    <button class="dropdown-item" data-mode="double">Double Page</button>
                    <button class="dropdown-item" data-mode="book">Book Mode</button>
                    <hr>
                    <button class="dropdown-item" data-mode="horizontal">Horizontal Scroll</button>
                    <button class="dropdown-item" data-mode="sidebyside">Side by Side</button>
                </div>
            </div>

            <!-- Reading Mode Dropdown -->
            <div class="dropdown">
                <button class="viewer-btn" id="readingModeBtn" title="Reading Mode">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5" />
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42" />
                    </svg>
                </button>
                <div class="dropdown-menu" id="readingModeMenu">
                    <button class="dropdown-item active" data-reading="normal">Normal</button>
                    <button class="dropdown-item" data-reading="night">Night Mode</button>
                    <button class="dropdown-item" data-reading="sepia">Sepia Mode</button>
                    <button class="dropdown-item" data-reading="dark">Dark Mode</button>
                    <hr>
                    <button class="dropdown-item" data-reading="focus">Focus Mode</button>
                </div>
            </div>

            <!-- Tools Dropdown -->
            <div class="dropdown">
                <button class="viewer-btn" id="toolsBtn" title="Tools">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                </button>
                <div class="dropdown-menu" id="toolsMenu">
                    <button class="dropdown-item" id="rulerTool">üìè Ruler Overlay</button>
                    <button class="dropdown-item" id="magnifierTool">üîç Magnifier</button>
                    <button class="dropdown-item" id="lineHelper">üìñ Line Helper</button>
                    <hr>
                    <button class="dropdown-item" id="autoScroll">‚è¨ Auto-Scroll</button>
                    <button class="dropdown-item" id="timerTool">‚è±Ô∏è Reading Timer</button>
                    <hr>
                    <button class="dropdown-item" id="wordCount">üìä Word Count</button>
                    <button class="dropdown-item" id="extractText">üìù Extract Text</button>
                    <button class="dropdown-item" id="extractMetadata">‚ÑπÔ∏è View Metadata</button>
                </div>
            </div>

            <button class="viewer-btn" id="fullscreenBtn" title="Fullscreen (F11)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 3 21 3 21 9" />
                    <polyline points="9 21 3 21 3 15" />
                    <line x1="21" y1="3" x2="14" y2="10" />
                    <line x1="3" y1="21" x2="10" y2="14" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Search Bar (hidden by default) -->
    <div class="search-bar hidden" id="searchBar">
        <input type="text" id="searchInput" placeholder="Search in document...">
        <span id="searchResults">0 of 0</span>
        <button class="viewer-btn" id="searchPrev">‚Üë</button>
        <button class="viewer-btn" id="searchNext">‚Üì</button>
        <button class="viewer-btn" id="searchClose">‚úï</button>
    </div>

    <!-- Main Container -->
    <div class="viewer-container">
        <!-- Sidebar -->
        <aside class="viewer-sidebar" id="sidebar">
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="thumbnails">Pages</button>
                <button class="sidebar-tab" data-tab="bookmarks">Bookmarks</button>
                <button class="sidebar-tab" data-tab="notes">Notes</button>
            </div>

            <div class="sidebar-content">
                <!-- Thumbnails -->
                <div class="sidebar-panel active" id="thumbnailsPanel">
                    <div class="thumbnails-grid" id="thumbnailsGrid"></div>
                </div>

                <!-- Bookmarks -->
                <div class="sidebar-panel" id="bookmarksPanel">
                    <div class="bookmarks-list" id="bookmarksList">
                        <p class="empty-message">No bookmarks yet</p>
                    </div>
                </div>

                <!-- Notes -->
                <div class="sidebar-panel" id="notesPanel">
                    <button class="btn btn-primary btn-sm mb-4" id="addNoteBtn" style="width: 100%;">+ Add Note</button>
                    <div class="notes-list" id="notesList">
                        <p class="empty-message">No notes yet</p>
                    </div>
                </div>
            </div>

            <!-- Reading Progress -->
            <div class="reading-progress">
                <div class="progress-bar" id="readingProgressBar" style="width: 0%"></div>
            </div>
            <div class="reading-stats">
                <span id="readingTime">0m reading</span>
                <span id="progressPercent">0%</span>
            </div>
        </aside>

        <!-- Main Viewer -->
        <main class="viewer-main" id="viewerMain">
            <!-- Empty State -->
            <div class="viewer-empty" id="emptyState">
                <div class="dropzone" style="max-width: 500px;">
                    <svg class="dropzone-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                    </svg>
                    <h3 class="dropzone-title">Open a PDF to read</h3>
                    <p class="dropzone-subtitle">Drop your PDF here or click to browse</p>
                    <input type="file" id="fileInput" accept=".pdf" hidden>
                </div>

                <!-- Recent Files -->
                <div class="recent-files mt-8" id="recentFiles">
                    <h4>Recent Files</h4>
                    <div class="recent-list" id="recentList"></div>
                </div>
            </div>

            <!-- PDF Container -->
            <div class="pdf-container hidden" id="pdfContainer">
                <div class="pdf-pages" id="pdfPages"></div>
            </div>

            <!-- Mini Map -->
            <div class="minimap hidden" id="minimap">
                <canvas id="minimapCanvas"></canvas>
                <div class="minimap-viewport" id="minimapViewport"></div>
            </div>
        </main>
    </div>

    <!-- Reading Timer Overlay -->
    <div class="timer-overlay hidden" id="timerOverlay">
        <span id="timerDisplay">00:00:00</span>
        <button class="viewer-btn" id="timerPause">‚è∏</button>
        <button class="viewer-btn" id="timerStop">‚èπ</button>
    </div>

    <!-- Ruler Overlay -->
    <div class="ruler-overlay hidden" id="rulerOverlay"></div>

    <!-- Magnifier -->
    <div class="magnifier hidden" id="magnifier">
        <canvas id="magnifierCanvas"></canvas>
    </div>

    <!-- Line Helper -->
    <div class="line-helper hidden" id="lineHelper"></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modals -->
    <div class="modal-backdrop hidden" id="metadataModal">
        <div class="modal">
            <div class="modal-header">
                <h3>PDF Metadata</h3>
                <button class="modal-close" onclick="closeModal('metadataModal')">‚úï</button>
            </div>
            <div class="modal-body" id="metadataContent"></div>
        </div>
    </div>

    <div class="modal-backdrop hidden" id="noteModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Add Note</h3>
                <button class="modal-close" onclick="closeModal('noteModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <label class="mb-2" style="display: block;">Page <span id="notePageNum">1</span></label>
                <textarea id="noteText" class="input" rows="5" placeholder="Enter your note..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('noteModal')">Cancel</button>
                <button class="btn btn-primary" id="saveNoteBtn">Save Note</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/viewer.js"></script>
</body>

</html>